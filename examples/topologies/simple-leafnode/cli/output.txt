Network 585bc73f_default  Creating
Network 585bc73f_default  Created
Container 585bc73f-nats-1  Creating
Container 585bc73f-nats-1  Created
Container 585bc73f-nats-1  Starting
Container 585bc73f-nats-1  Started
+ NATS_MAIN_URL=nats://0.0.0.0:4222
+ NATS_LEAF_URL=nats://0.0.0.0:4223
+ nats context save main --server nats://0.0.0.0:4222
NATS Configuration Context "main"

      Server URLs: nats://0.0.0.0:4222
             Path: /nsc/.config/nats/context/main.json

WARNING: Shell environment overrides in place using NATS_URL
+ nats context save leaf --server nats://0.0.0.0:4223
NATS Configuration Context "leaf"

      Server URLs: nats://0.0.0.0:4223
             Path: /nsc/.config/nats/context/leaf.json

WARNING: Shell environment overrides in place using NATS_URL
Creating the main server conf...
+ echo 'Creating the main server conf...'
+ cat
Creating the leaf node conf...
+ echo 'Creating the leaf node conf...'
+ cat
+ MAIN_PID=31
+ sleep 1
+ nats-server -c main.conf
+ LEAF_PID=41
+ sleep 1
+ nats-server -c leaf.conf
+ SERVICE_PID=51
+ sleep 1
+ nats --context main reply greet 'hello from main'
02:11:01 Listening on "greet" in group "NATS-RPLY-22"
+ nats --context leaf request greet ''
02:11:02 Sending request on "greet"


02:11:02 [#0] Received on subject "greet":
02:11:02 Received with rtt 243.502µs
hello from main

+ SERVICE2_PID=74
+ nats --context leaf request greet ''
+ nats --context leaf reply greet 'hello from leaf'
02:11:02 Sending request on "greet"


02:11:02 [#1] Received on subject "greet":
02:11:02 Listening on "greet" in group "NATS-RPLY-22"
hello from main

02:11:02 Received with rtt 219.57µs
+ nats --context leaf request greet ''
02:11:02 Sending request on "greet"
02:11:02 [#0] Received on subject "greet":


hello from leaf

02:11:02 Received with rtt 269.704µs
+ nats --context leaf request greet ''
02:11:02 Sending request on "greet"


02:11:02 [#1] Received on subject "greet":
hello from leaf

02:11:02 Received with rtt 215.189µs
+ kill 74
+ nats --context leaf request greet ''
02:11:02 Sending request on "greet"
02:11:02 [#2] Received on subject "greet":


hello from main

02:11:02 Received with rtt 207.136µs
+ kill 51
+ kill 41
+ kill 31
