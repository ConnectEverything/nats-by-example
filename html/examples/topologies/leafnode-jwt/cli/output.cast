{"version": 2, "width": 86, "height": 24, "timestamp": 1658146337, "env": {"SHELL": "/bin/bash", "TERM": "xterm-color"}, "title": "NATS by Example: topologies/leafnode-jwt/cli"}
[0.110884, "o", "Network 65af27f1_default  Creating\r\n"]
[0.169801, "o", "Network 65af27f1_default  Created\r\n"]
[0.692149, "o", "             _             _               \r\n _ __   __ _| |_ ___      | |__   _____  __\r\n| '_ \\ / _` | __/ __|_____| '_ \\ / _ \\ \\/ /\r\n| | | | (_| | |_\\__ \\_____| |_) | (_) >  < \r\n|_| |_|\\__,_|\\__|___/     |_.__/ \\___/_/\\_\\\r\n                                           \r\nnats-box v0.12.0\r\n"]
[0.692407, "o", "+ NATS_MAIN_URL=nats://0.0.0.0:4222\r\n+ NATS_LEAF_URL=nats://0.0.0.0:4223\r\n+ nsc add operator --generate-signing-key --sys --name local\r\n"]
[0.711763, "o", "[ OK ] generated and stored operator key \"OBA4MEJE33O7FM2IHCHSPDK362OP3EQ7U54UFM6UB3VIMWBPZMNPUC7N\"\r\n[ OK ] added operator \"local\"\r\n[ OK ] When running your own nats-server, make sure they run at least version 2.2.0\r\n[ OK ] created operator signing key: OBGXY46O6M7D5MPR75SLTK5AWN5P2R34SZFAYWWIEURNDIREIULAD22S\r\n[ OK ] created system_account: name:SYS id:ADMPNQC7QE2LFABYBGEA7AEN37O2T5Z26GQPAVNB4P43RGF3KDAGFYIW\r\n[ OK ] created system account user: name:sys id:UAOJIINY45JT5JLI7FYWRX5HEBBFXVOVOIVTKM5MFH2T2VSAFLH4DJSZ\r\n[ OK ] system account user creds file stored in `/nsc/nkeys/creds/local/SYS/sys.creds`\r\n"]
[0.712796, "o", "+ nsc edit operator --require-signing-keys --account-jwt-server-url nats://0.0.0.0:4222\r\n"]
[0.727299, "o", "[ OK ] strict signing key usage set to: true\r\n[ OK ] set account jwt server url to \"nats://0.0.0.0:4222\"\r\n[ OK ] edited operator \"local\"\r\n"]
[0.728007, "o", "+ nsc add account APP\r\n"]
[0.740735, "o", "[ OK ] generated and stored account key \"ADBFUJSUHBMTN67HZJD327RCTLRGIYKSTWAZIUXS5U2H3CDGW5FCG7T7\"\r\n[ OK ] added account \"APP\"\r\n"]
[0.741359, "o", "+ nsc edit account APP --sk generate\r\n"]
[0.754834, "o", "[ OK ] added signing key \"AB65VFZBW4RN34LQCHICB3BTGQ6YVDAC653CAP2S4OIWHEUU7KQ444MI\"\r\n[ OK ] edited account \"APP\"\r\n"]
[0.755604, "o", "+ nsc add user --account APP user\r\n"]
[0.771721, "o", "[ OK ] generated and stored user key \"UDEMHMTMMGCNTKAK5T532WGAMEDHBFF77CPDRSTHYV7ZIDMY2Y6HQN3E\"\r\n[ OK ] generated user creds file `/nsc/nkeys/creds/local/APP/user.creds`\r\n[ OK ] added user \"user\" to account \"APP\"\r\n"]
[0.773962, "o", "+ nsc env\r\n"]
[0.781932, "o", "+----------------------------------------------------------------------------------------------------------+\r\n|                                             NSC Environment                                              |\r\n+--------------------+-----+-------------------------------------------------------------------------------+\r\n| Setting            | Set | Effective Value                                                               |\r\n+--------------------+-----+-------------------------------------------------------------------------------+\r\n| $NSC_CWD_ONLY      | No  | If set, default operator/account from cwd only                                |\r\n| $NSC_NO_GIT_IGNORE | No  | If set, no .gitignore files written                                           |\r\n| $NKEYS_PATH        | Yes | /nsc/nkeys                                                                    |\r\n| $NSC_HOME          | No  | /nsc/.config/nats/nsc                                                         |\r\n| $NATS_CA           | No  | If se"]
[0.782088, "o", "t, root CAs in the referenced file will be used for nats connections     |\r\n|                    |     | If not set, will default to the system trust store                            |\r\n| $NATS_KEY          | No  | If set, the tls key in the referenced file will be used for nats connections  |\r\n| $NATS_CERT         | No  | If set, the tls cert in the referenced file will be used for nats connections |\r\n+--------------------+-----+-------------------------------------------------------------------------------+\r\n| From CWD           |     | No                                                                            |\r\n| Default Stores Dir |     | /nsc/nats/nsc/stores                                                          |\r\n| Current Store Dir  |     | /nsc/nats/nsc/stores                                                          |\r\n| Current Operator   |     | local                                                                         |\r\n| Current Account    |     | APP                                    "]
[0.782166, "o", "                                       |\r\n| Root CAs to trust  |     | Default: System Trust Store                                                   |\r\n+--------------------+-----+-------------------------------------------------------------------------------+\r\n\r\n"]
[0.782984, "o", "+ nats context save main-user --server nats://0.0.0.0:4222 --nsc nsc://local/APP/user\r\n"]
[0.838411, "o", "NATS Configuration Context \"main-user\"\r\n\r\n      Server URLs: nats://0.0.0.0:4222\r\n      Credentials: /nsc/nkeys/creds/local/APP/user.creds (OK)\r\n       NSC Lookup: nsc://local/APP/user\r\n             Path: /nsc/.config/nats/context/main-user.json\r\n\r\n"]
[0.839701, "o", "+ nats context save main-sys --server nats://0.0.0.0:4222 --nsc nsc://local/SYS/sys\r\n"]
[0.893201, "o", "NATS Configuration Context \"main-sys\"\r\n\r\n      Server URLs: nats://0.0.0.0:4222\r\n      Credentials: /nsc/nkeys/creds/local/SYS/sys.creds (OK)\r\n       NSC Lookup: nsc://local/SYS/sys\r\n             Path: /nsc/.config/nats/context/main-sys.json\r\n\r\n"]
[0.894667, "o", "+ nats context save leaf-user --server nats://0.0.0.0:4223\r\n"]
[0.936941, "o", "NATS Configuration Context \"leaf-user\"\r\n\r\n      Server URLs: nats://0.0.0.0:4223\r\n             Path: /nsc/.config/nats/context/leaf-user.json\r\n\r\n"]
[0.938079, "o", "+ nsc generate config --nats-resolver --sys-account SYS\r\n"]
[0.947518, "o", "Creating the main server conf...\r\n+ echo 'Creating the main server conf...'\r\n+ cat\r\n"]
[0.948287, "o", "+ echo 'Creating the leaf node conf...'\r\nCreating the leaf node conf...\r\n"]
[0.948498, "o", "+ cat\r\n"]
[0.949172, "o", "+ MAIN_PID=99\r\n+ sleep 1\r\n"]
[0.949291, "o", "+ nats-server -c main.conf\r\n"]
[1.950311, "o", "Pushing the account JWT...\r\n+ echo 'Pushing the account JWT...'\r\n+ nsc push -a APP\r\n"]
[2.972032, "o", "[ OK ] push to nats-server \"nats://0.0.0.0:4222\" using system account \"SYS\":\r\n       [ OK ] push APP to nats-server with nats account resolver:\r\n              [ OK ] pushed \"APP\" to nats-server NB6YKJ4ZAT3MYWMHMY2UYRSX6DXPUHPOJQOAHPJ4ZW2PN2BHIMS7ID4T: jwt updated\r\n              [ OK ] pushed to a total of 1 nats-server\r\n"]
[2.973009, "o", "+ LEAF_PID=115\r\n+ sleep 1\r\n+ "]
[2.973242, "o", "nats-server"]
[2.973404, "o", " -c leaf.conf\r\n"]
[3.97433, "o", "+ SERVICE_PID=125\r\n+ sleep 1\r\n+ nats --context main-user reply greet"]
[3.974407, "o", " hello\r\n"]
[4.045026, "o", "12:12:21 Listening on \"greet\" in group \"NATS-RPLY-22\"\r\n"]
[4.975343, "o", "+ nats --context leaf-user request greet \r\n"]
[5.028638, "o", "12:12:22 Sending request on \"greet\"\r\n"]
[5.029232, "o", "\r\n\r\n12:12:22 [#0] Received on subject \"greet\":\r\n"]
[5.029668, "o", "12:12:22 Received with rtt 861.64Âµs\r\n"]
[5.029817, "o", "hello\r\n\r\n"]
[5.031228, "o", "+ kill 125\r\n+ kill 115\r\n+ kill 99\r\n"]
